
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ModelUI - Getting Started</title><meta name="generator" content="MATLAB 9.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2023-11-10"><meta name="DC.source" content="muitbx_gettingstarted.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>ModelUI - Getting Started</h1><!--introduction--><p>The steps below outline how to setup a bespoke application of ModelUI by modifying the default UI. These steps are also set out in the <a href="matlab:mui_open_manual">Introduction to muitoolbox slide pack</a>.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#3">Main UI</a></li><li><a href="#6">Data import</a></li><li><a href="#8">Input parameters</a></li><li><a href="#9">Models</a></li><li><a href="#11">Data access UIs</a></li><li><a href="#15">See Also</a></li></ul></div><div><ol><li>Decide on what components are needed. These might include: <br>   o UI - the main interface for the application  <br>   o Data import - load different types of data <br>   o Input parameters - define any parameters needed for the application <br>   o Model(s) - initialise and call any models to be run by the application.  <br></li><li>Give names to each component, e.g.: <br>   ModelUI, demoData, demoProps, demoModel</li><li>Copy the class templates for the components from here to your working folder</li><li>Create classes for each component by editing the templates as illustrated   for each template below.</li></ol></div><p>Templates for the main components are provided in the muitemplates folder, which can be found <a href="matlab:mui_template_folder">here</a>. The templates provide the code for each component and the comments highlight where the files need to be edited to adapt the templates to a different application.</p><h2 id="3">Main UI</h2><p>To adapt the demonstration <a href="matlab:doc('modelui')">ModelUI</a> App for a new application, the class inherits the ModelUI class.</p><p>Define a classname that reflects the intended application. In the setMUI method define the components of the application, such as the model and input parameter classes used that define the ModelInputs property and the plottig and statistics options to include in the respective UIs. The setTabProperties method has to be edited to match the class names for the parameter inputs and the position for each parameter set on the tab. Finally, the calls to input classes and to run the model need to be edited to the class and method names to be used.</p><pre class="language-matlab">
<span class="keyword">classdef</span> UseModelUI_template &lt; ModelUI                       <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help---------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   UseModelUI_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Main GUI for a bespoke implementation of ModelUI.</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   Abstract class muiModelUI.m and tools provided in muitoolbox</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% </span>
    <span class="keyword">properties</span>
        <span class="comment">%Properties defined in muiModelUI that need to be defined in setGui</span>
        <span class="comment">% ModelInputs  %classes required by model: used in isValidModel check </span>
        <span class="comment">% DataUItabs   %struct to define type of muiDataUI tabs for each use                         </span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> (Static)
        <span class="keyword">function</span> obj = UseModelUI_template                   <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%constructor function initialises GUI          </span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of GUI Settings</span>
<span class="comment">%--------------------------------------------------------------------------  </span>
    <span class="keyword">methods</span> (Access = protected)
        <span class="keyword">function</span> obj = setMUI(obj)
            <span class="comment">%initialise standard figure and menus   </span>
            modelLogo = <span class="string">'mui_logo.jpg'</span>; <span class="comment">%default splash figure &lt;&lt; edit to alternative</span>
            
            <span class="comment">%classes required to run model; format:          % &lt;&lt; Edit to model and input parameters classnames                                                </span>
            <span class="comment">%obj.ModelInputs.&lt;model classname&gt; = {'Param_class1',Param_class2',etc}</span>
            obj.ModelInputs.Model_template = {<span class="string">'ParamInput_template'</span>};
            
            <span class="comment">%tabs to include in DataUIs for plotting and statistical analysis</span>
            <span class="comment">%select which of the options are needed and delete the rest</span>
            <span class="comment">%Plot options: '2D','3D','4D','2DT','3DT','4DT'</span>
            obj.DataUItabs.Plot = {<span class="string">'2D'</span>,<span class="string">'3D'</span>,<span class="string">'4D'</span>,<span class="string">'2DT'</span>,<span class="string">'3DT'</span>,<span class="string">'4DT'</span>};  
            <span class="comment">%Statistics options: 'General','Timeseries','Taylor','Intervals'</span>
            obj.DataUItabs.Stats = {<span class="string">'General'</span>,<span class="string">'Timeseries'</span>,<span class="string">'Taylor'</span>,<span class="string">'Intervals'</span>};
            
            <span class="comment">%inherit from ModelUI constructor and overload some setup values</span>
            obj.vNumber = <span class="string">'1.0'</span>;   
            obj.vDate   = <span class="string">'Jan 2021'</span>;
            obj. modelName = <span class="string">'UseModelUI_template'</span>;          <span class="comment">% &lt;&lt; Edit to application name</span>
              
            
            initialiseUI(obj,modelLogo); <span class="comment">%initialise menus and tabs   </span>
            <span class="comment">%if required call setAdditionalMenus and/or setAdditionalTabs</span>
            setAdditionalMenus(obj);                         <span class="comment">% &lt;&lt; Delete if not needed</span>
            setAdditionalTabs(obj)  
        <span class="keyword">end</span>    
        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of Menu Settings</span>
<span class="comment">%--------------------------------------------------------------------------</span>
        <span class="comment">%Use default settings</span>
        <span class="keyword">function</span> setAdditionalMenus(obj)
            <span class="comment">%add to or amend default menu settings&#12290;To make major</span>
            <span class="comment">%adjustments overload the setMenus function in ModelUI</span>
                                                             <span class="comment">% &lt;&lt; Add any additional functionality required</span>
            <span class="comment">%demo code to delete menu item</span>
            <span class="comment">% menuname = 'Help';                      </span>
            <span class="comment">% delete(obj.mUI.Menus.(menuname));   </span>
            
            <span class="comment">%demo code to add menu items to end of existing menu list. </span>
            <span class="comment">% Would need function plotMenuOptions to be added to make operational</span>
            <span class="comment">% menu = menuStruct(obj,{'Plot','Documentation'});</span>
            <span class="comment">% menu.Plot.List = {'Plot 1','Plot 2'};</span>
            <span class="comment">% menu.Plot.Callback = repmat({@obj.plotMenuOptions},[1,2]);</span>
            <span class="comment">% menu.Help(1).Callback = {@obj.Help};</span>
            <span class="comment">% addAppMenus(obj,menu)    </span>
            
            <span class="comment">%demo code to move the plot menu next to Setup</span>
            <span class="comment">% hm = findobj(obj.mUI.Figure.Children,'Type','uimenu','-depth',0);</span>
            <span class="comment">% hmenu = findobj(hm,'Text','Plot');</span>
            <span class="comment">%move 3 places to left - note: graphical objects stack is in reverse order</span>
            <span class="comment">% uistack(hmenu,'down',3); </span>

            <span class="comment">%demo code to change a callback and delete sub-submenus</span>
            <span class="comment">% menuname = 'Setup';</span>
            <span class="comment">% hm = findSubMenu(obj,menuname,'Import Data');</span>
            <span class="comment">% hm.MenuSelectedFcn=@obj.setupMenuOptions; %change menu call fcn</span>
            <span class="comment">% delete(hm.Children);                      %delete sub-submenu</span>
            
            <span class="comment">%replace existing menu with a new defintion</span>
            <span class="comment">% menuname = 'Setup';</span>
            <span class="comment">% menu = menuStruct(obj,{menuname});</span>
            <span class="comment">% menu.Setup(1).List = {'Import Data','Input parameters',...</span>
            <span class="comment">%                           'Run parameters','Model Constants'};                                    </span>
            <span class="comment">% menu.Setup(1).Callback = [{'gcbo;'},repmat({@obj.setupMenuOptions},[1,3])];</span>
            <span class="comment">% </span>
            <span class="comment">%add submenu for Import Data</span>
            <span class="comment">% menu.Setup(2).List = {'Load','Add','Delete','Quality Control'};</span>
            <span class="comment">% menu.Setup(2).Callback = repmat({@obj.loadMenuOptions},[1,4]);</span>
            <span class="comment">% modifySubMenus(obj,menuname,menu);</span>
            
        <span class="keyword">end</span>        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of Tab Settings</span>
<span class="comment">%--------------------------------------------------------------------------</span>
        <span class="comment">%Use default settings</span>
        <span class="keyword">function</span> setAdditionalTabs(obj)
            <span class="comment">%add to or amend default tab settings. To make major</span>
            <span class="comment">%adjustments overload the setTabs function in ModelUI            </span>
                                                            <span class="comment">% &lt;&lt; Add any additional functionality required</span>
            <span class="comment">%demo code to delete tab</span>
            <span class="comment">% tabname = 'Stats';   </span>
            <span class="comment">% ht = findobj(obj.mUI.Tabs,'Tag',tabname);</span>
            <span class="comment">% delete(ht);</span>
            
            <span class="comment">%demo code to reorder tabs</span>
            <span class="comment">% tabname = 'Stats';   </span>
            <span class="comment">% htab = findobj(obj.mUI.Tabs,'Tag',tabname);</span>
            <span class="comment">%move 1 place to left - note: tabgroup objects are in order</span>
            <span class="comment">% uistack(htab,'up',1); </span>
            
            <span class="comment">%demo code to delete subtab</span>
            <span class="comment">% [ht,htgrp] = findSubTab(obj,'Stats','Extremes');</span>
            <span class="comment">% delete(ht) %deletes 'Extremes' tab</span>
            <span class="comment">% delete(htgrp) deletes all tabs of the Parent tabgroup to Extremes </span>
            
            <span class="comment">%demo code to add tab</span>
            <span class="comment">% tabs.Tide = {'   Tide   ','gcbo;'};</span>
            <span class="comment">% subtabs.Tide(1,:) = {' Constituents ',@obj.getTabData};</span>
            <span class="comment">% subtabs.Tide(2,:) = {' Mean values ',@obj.getTabData};</span>
            <span class="comment">% setAppTabs(obj,tabs,subtabs);   </span>
            
            <span class="comment">%demo code to add subtab</span>
            <span class="comment">% tabtag = 'Inputs';   </span>
            <span class="comment">% subtabs.Inputs(1,:) = {' Demo1 ',@obj.getTabData};</span>
            <span class="comment">% subtabs.Inputs(2,:) = {' Demo2 ',@obj.getTabData};</span>
            <span class="comment">% setSubTab(obj,tabtag,subtabs)</span>
        <span class="keyword">end</span>        
<span class="comment"> %%</span>
        <span class="keyword">function</span> props = setTabProperties(~)
            <span class="comment">%define the tab and position to display class data tables</span>
            <span class="comment">%props format: {class name, tab tag name, position, ...</span>
            <span class="comment">%               column width, table title}</span>
                                                             <span class="comment">% &lt;&lt; Edit input properties classnames </span>
            props = {<span class="keyword">...</span><span class="comment">                                     % &lt;&lt; Add additional inputs and adjust layout</span>
                <span class="string">'ParamInput_template'</span>,<span class="string">'Inputs'</span>,[0.95,0.48],{180,60},<span class="string">'Input parameters:'</span>;<span class="keyword">...</span>
                <span class="string">'ParamInput_template'</span>,<span class="string">'Inputs'</span>,[0.45,0.48],{180,60},<span class="string">'Run parameters:'</span>};
        <span class="keyword">end</span>      
        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Callback functions used by menus and tabs</span>
<span class="comment">%-------------------------------------------------------------------------- </span>
        <span class="comment">%Use defaults except:</span>
<span class="comment">        %% Setup menu -----------------------------------------------------</span>
        <span class="keyword">function</span> setupMenuOptions(obj,src,~)
            <span class="comment">%callback functions for data input</span>
            <span class="keyword">switch</span> src.Text
                <span class="keyword">case</span> <span class="string">'Input parameters'</span>                      <span class="comment">% &lt;&lt; Edit to call Parameter Input class</span>
                    ParamInput_template.setInput(obj);                             
                    tabsrc = findobj(obj.mUI.Tabs,<span class="string">'Tag'</span>,<span class="string">'Inputs'</span>);
                    InputTabSummary(obj,tabsrc);
                <span class="keyword">case</span> <span class="string">'Run parameters'</span>                        <span class="comment">% &lt;&lt; Edit to call Parameter Input class</span>
                    ParamInput_template.setInput(obj);                             
                    tabsrc = findobj(obj.mUI.Tabs,<span class="string">'Tag'</span>,<span class="string">'Inputs'</span>);
                    InputTabSummary(obj,tabsrc);
                <span class="keyword">case</span> <span class="string">'Model Constants'</span>
                    obj.Constants = setInput(obj.Constants);
            <span class="keyword">end</span>
        <span class="keyword">end</span>             
<span class="comment">        %% Run menu -------------------------------------------------------</span>
        <span class="keyword">function</span> runMenuOptions(obj,src,~)
            <span class="comment">%callback functions to run model</span>
            <span class="keyword">switch</span> src.Text                   
                <span class="keyword">case</span> <span class="string">'Run Model'</span>                             <span class="comment">% &lt;&lt; Edit to call Model class</span>
                    Model_template.runModel(obj); 
                <span class="keyword">case</span> <span class="string">'Derive Output'</span>
                    obj.mUI.Manip = muiManipUI.getManipUI(obj);
            <span class="keyword">end</span>            
        <span class="keyword">end</span>  
<span class="comment">                %% Help menu ------------------------------------------------------</span>
        <span class="keyword">function</span> Help(~,~,~)
            docsearch <span class="string">UseModelUI_template</span>                               <span class="comment">% &lt;&lt; Edit to documentation name if available</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>

</pre><p>For bespoke implementations the new class should inherit the <a href="matlab:doc('muimodelui')">muiModelUI</a> interface. There are important differences in the class constructor method and these are highlighted in the UseUI_template.m template file.</p><h2 id="6">Data import</h2><p>For each type of <i>data</i> to be imported, define a classname and edit the template where indicated using the classname. The classname can be generic (e.g. Waves) and the meta-data can be modified to reflect variation in data from different sources (number of variables, file format, etc). This is used extensively in the ModelUI CoastalTools App. In the template provided, edit the call to dstable (line 46) and the file format defined in readInputData (line 67) to match the data being loaded. The Q-Plot tab displays a fixed format plot of the data. This can use the default format or be customised in the tabPlot function.</p><p>At the bottom of the template is the dataDSproperties function. This must be edited to match the data being loaded. Working out the details of the fomrat of the data being loaded helps to ensure that the data is being formatted correctly and defining the metadata defined by the dsproperties stuct ensures that the meta-data is avaialble for subsequent use of the data in plotting, statical analysis, etc.</p><pre class="language-matlab">
<span class="keyword">classdef</span> DataImport_template                                 <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help---------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   DataImport_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Class to illustrate importing a data set, adding the results to dstable</span>
<span class="comment">%   and a record in a dscatlogue (as a property of muiCatalogue)</span>
<span class="comment">% USAGE</span>
<span class="comment">%   obj = DataImport_template()</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   uses dstable and dscatalogue</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%    </span>
    <span class="keyword">properties</span>  
        Data
        RunParam
    <span class="keyword">end</span>
    
    <span class="keyword">properties</span> (Hidden, SetAccess=private)
        CaseIndex       <span class="comment">%case index assigned when class instance is loaded</span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> 
        <span class="keyword">function</span> obj = DataImport_template()                 <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%class constructor</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%%    </span>
    <span class="keyword">methods</span> (Static)
        <span class="keyword">function</span> loadData(muicat,~)
            <span class="comment">%read and load a data set from a file</span>
            obj = DataImport_template;                       <span class="comment">% &lt;&lt; Edit to classnamet</span>
            [data,~,filename] = readInputData(obj);             
            <span class="keyword">if</span> isempty(data), <span class="keyword">return</span>; <span class="keyword">end</span>
            dsp = setDSproperties(obj);  <span class="comment">%initialise dsproperties for data</span>
            
            <span class="comment">%code to parse input data and assign to varData</span>
            rdata = data{1};
            vardata = data{2};

            <span class="comment">%load the results into a dstable  </span>
            dst = dstable(vardata,<span class="string">'RowNames'</span>,rdata,<span class="string">'DSproperties'</span>,dsp); 
            
            <span class="comment">%assign metadata about data</span>
            dst.Source{1} = filename;
            <span class="comment">%setDataRecord classobj, muiCatalogue obj, dataset, classtype</span>
            setDataSetRecord(obj,muicat,dst,<span class="string">'data'</span>);           
        <span class="keyword">end</span> 
    <span class="keyword">end</span>   
<span class="comment">%%</span>
    <span class="keyword">methods</span>
        <span class="keyword">function</span> addData(obj,classrec,catrec,muicat) 
            <span class="comment">%add additional data to an existing user dataset</span>
            datasetname = getDataSetName(obj); <span class="comment">%prompts user to select dataset if more than one</span>
            dst = obj.Data.(datasetname);      <span class="comment">%selected dstable</span>
            
            [data,~,filename] = readInputData(obj);             
            <span class="keyword">if</span> isempty(data), <span class="keyword">return</span>; <span class="keyword">end</span>
            dsp = setDSproperties(obj);  <span class="comment">%initialise dsproperties for data</span>
            <span class="comment">%load the results into a dstable            </span>
            adn_dst = dstable(data{2},<span class="string">'DSproperties'</span>,dsp);
            adn_dst.Dimensions.Z = data{1};     <span class="comment">%grid z-coordinate</span>
            <span class="keyword">if</span> isempty(adn_dst), <span class="keyword">return</span>; <span class="keyword">end</span>
            
            [~,~,ndim] = getvariabledimensions(dst,<span class="string">'uObs'</span>);
            <span class="keyword">if</span> strcmp(dst.RowType,<span class="string">'datetime'</span>)  <span class="comment">%insert data in existing record</span>
                dst = mergerows(dst,adn_dst);  
            <span class="keyword">elseif</span> ndim(1)==1 &amp;&amp; ndim(2)&gt;1
                warndlg(<span class="string">'Vertical concatenation of X-arrays not possible'</span>)
                <span class="keyword">return</span>
            <span class="keyword">else</span>                               <span class="comment">%concatenate in order to end</span>
                dst = vertcat(dst,adn_dst);
            <span class="keyword">end</span>
            <span class="keyword">if</span> isempty(dst), <span class="keyword">return</span>; <span class="keyword">end</span>
            
            <span class="comment">%assign metadata about data</span>
            nfile = length(dst.Source);
            dst.Source{nfile+1} = filename;
            
            obj.Data.(datasetname) = dst;  
            updateCase(muicat,obj,classrec);
            getdialog(sprintf(<span class="string">'Data added to: %s'</span>,catrec.CaseDescription));
        <span class="keyword">end</span>        
<span class="comment">%%</span>
        <span class="keyword">function</span> deleteData(obj,classrec,catrec,muicat)
            <span class="comment">%delete variable or rows from a dataset</span>
            datasetname = getDataSetName(obj); <span class="comment">%prompts user to select dataset if more than one</span>
            dst = obj.Data.(datasetname);      <span class="comment">%selected dstable</span>
            
            delist = dst.VariableNames;
            <span class="comment">%select variable to use</span>
            promptxt = {sprintf(<span class="string">'Select Variable'</span>)}; 
            att2use = 1;
            <span class="keyword">if</span> length(delist)&gt;1
                [att2use,ok] = listdlg(<span class="string">'PromptString'</span>,promptxt,<span class="keyword">...</span>
                                 <span class="string">'Name'</span>,title,<span class="string">'SelectionMode'</span>,<span class="string">'single'</span>,<span class="keyword">...</span>
                                 <span class="string">'ListSize'</span>,[250,100],<span class="string">'ListString'</span>,delist);
                <span class="keyword">if</span> ok&lt;1, <span class="keyword">return</span>; <span class="keyword">end</span>  
            <span class="keyword">end</span>
            promptxt = sprintf(<span class="string">'Delete variable: %s?'</span>,delist{att2use});
            selopt = questdlg(promptxt,<span class="string">'Delete variable'</span>,<span class="keyword">...</span>
                                      <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'No'</span>);
            <span class="keyword">if</span> strcmp(selopt,<span class="string">'Yes'</span>)
                dst.(delist{att2use}) = [];  <span class="comment">%delete selected variable</span>

                obj.Data.(datasetname) = dst;            
                updateCase(muicat,obj,classrec);
                getdialog(sprintf(<span class="string">'Data deleted from: %s'</span>,catrec.CaseDescription));
            <span class="keyword">end</span>
        <span class="keyword">end</span>
<span class="comment">%%</span>
        <span class="keyword">function</span> qcData(obj,classrec,catrec,muicat)
            <span class="comment">%quality control a dataset</span>
            warndlg(<span class="string">'No quality control defined for this format'</span>);
        <span class="keyword">end</span>          
<span class="comment">%%</span>
        <span class="keyword">function</span> tabPlot(obj,src)
            <span class="comment">%generate plot for display on Q-Plot tab</span>
            
            <span class="comment">%define data specific plot</span>
        <span class="keyword">end</span>     
        
    <span class="keyword">end</span>
<span class="comment">%%</span>
    <span class="keyword">methods</span> (Access = private)
         <span class="keyword">function</span> setDataSetRecord(obj,muicat,dataset,datatype)
            <span class="comment">%assign dataset to class Data property and update catalogue</span>
            <span class="keyword">if</span> isstruct(dataset)
                obj.Data = dataset;   <span class="comment">%can be struct of multiple tables</span>
            <span class="keyword">else</span>
                obj.Data.Dataset = dataset;  
            <span class="keyword">end</span> 
            classname = metaclass(obj).Name;            
            <span class="comment">%add record to the catalogue and update mui.Cases.DataSets</span>
            caserec = addRecord(muicat,classname,datatype);
            casedef = getRecord(muicat,caserec);
            obj.CaseIndex = casedef.CaseID;
            datasets = fieldnames(obj.Data);
            <span class="keyword">for</span> i=1:length(datasets)
                <span class="keyword">if</span> isa(obj.Data.(datasets{i}),<span class="string">'dstable'</span>)
                    obj.Data.(datasets{i}).Description = casedef.CaseDescription;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
            <span class="comment">%</span>
            <span class="keyword">if</span> isempty(muicat.DataSets) || ~isfield(muicat.DataSets,classname) ||<span class="keyword">...</span>
                    isempty(muicat.DataSets.(classname))
                idrec = 1;
            <span class="keyword">else</span>
                idrec = length(muicat.DataSets.(classname))+1;
            <span class="keyword">end</span>
            muicat.DataSets.(classname)(idrec) = obj;           
        <span class="keyword">end</span>  
<span class="comment">%%</span>
        <span class="keyword">function</span> datasetname = getDataSetName(obj)
            <span class="comment">%check whether there is more than one dstable and select</span>
            dataset = 1;
            datasetnames = fieldnames(obj.Data);
            <span class="keyword">if</span> length(datasetnames)&gt;1
                promptxt = {<span class="string">'Select dataset'</span>};
                title = <span class="string">'Save dataset'</span>;
                [dataset,ok] = listdlg(<span class="string">'PromptString'</span>,promptxt,<span class="keyword">...</span>
                           <span class="string">'SelectionMode'</span>,<span class="string">'single'</span>,<span class="string">'Name'</span>,title,<span class="keyword">...</span>
                           <span class="string">'ListSize'</span>,[300,100],<span class="string">'ListString'</span>,datasetnames);
                <span class="keyword">if</span> ok&lt;1, <span class="keyword">return</span>; <span class="keyword">end</span>       
            <span class="keyword">end</span>
            datasetname = datasetnames{dataset};
        <span class="keyword">end</span>
<span class="comment">%%</span>
        <span class="keyword">function</span> [data,header,filename] = readInputData(~) 
            <span class="comment">%read wind data (read format is file specific).</span>
            [fname,path,~] = getfiles(<span class="string">'FileType'</span>,<span class="string">'*.txt'</span>);
            filename = [path fname];
            dataSpec = <span class="string">'%d %d %s %s %s %s'</span>; 
            nhead = 1;     <span class="comment">%number of header lines</span>
            [data,header] = readinputfile(filename,nhead,dataSpec);
        <span class="keyword">end</span>       
<span class="comment">%%        </span>
        <span class="keyword">function</span> dsp = setDSproperties(~)
            <span class="comment">%define the metadata properties for the demo data set</span>
            dsp = struct(<span class="string">'Variables'</span>,[],<span class="string">'Row'</span>,[],<span class="string">'Dimensions'</span>,[]);  
            <span class="comment">%define each variable to be included in the data table and any</span>
            <span class="comment">%information about the dimensions. dstable Row and Dimensions can</span>
            <span class="comment">%accept most data types but the values in each vector must be unique</span>
            
            <span class="comment">%struct entries are cell arrays and can be column or row vectors</span>
            dsp.Variables = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Var1'</span>,<span class="string">'Var2'</span>},<span class="keyword">...</span><span class="comment">                   % &lt;&lt;Edit metadata to suit model</span>
                <span class="string">'Description'</span>,{<span class="string">'Variable 1'</span>,<span class="string">'Variable 2'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m/s'</span>,<span class="string">'m/s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Plot label 1'</span>,<span class="string">'Plot label 2'</span>},<span class="keyword">...</span>
                <span class="string">'QCflag'</span>,repmat({<span class="string">'raw'</span>},1,2));  
            dsp.Row = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'h'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'dd-MM-yyyy HH:mm:ss'</span>});        
            dsp.Dimensions = struct(<span class="keyword">...</span><span class="comment">    </span>
                <span class="string">'Name'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">''</span>});  
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>

</pre><h2 id="8">Input parameters</h2><p>For each set of <i>input parameters</i>, define a classname and edit the template where indicated using the classname. Define the <i>input parameters</i> required in the properties block and provide a description (used in the input UI) for each parameter as a cell array of strings in the PropertyLabels property.</p><p><a href="include">include</a>../muitemplates/ParamInput_template.m&lt;/include&gt;GDinterface</p><h2 id="9">Models</h2><p>For each <i>model</i> to be included, define a classname and edit the template where indicated using the classname. In the sections of the template indicated as Model code and Assing model output, edit to suit the needs of the application. The Q-Plot tab display a fixed format plot of the model output. This can use the default format or be customised in the tabPlot function.</p><pre class="language-matlab">
<span class="keyword">classdef</span> Model_template &lt; muiDataSet                         <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help---------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   Model_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Class description - Class for Model XXXXX to be run as a muitoolbox app</span>
<span class="comment">%</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   muiDataSet</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%     </span>
    <span class="keyword">properties</span>
        <span class="comment">%inherits Data, RunParam, MetaData and CaseIndex from muiDataSet</span>
        <span class="comment">%Additional properties:     </span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> obj = Model_template()                      <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%class constructor</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>      
<span class="comment">%%</span>
    <span class="keyword">methods</span> (Static)        
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Model implementation</span>
<span class="comment">%--------------------------------------------------------------------------         </span>
        <span class="keyword">function</span> obj = runModel(mobj)
            <span class="comment">%function to run a simple 2D diffusion model</span>
            obj = Model_template;                            <span class="comment">% &lt;&lt; Edit to classname</span>
            dsp = modelDSproperties(obj);
            
            <span class="comment">%now check that the input data has been entered</span>
            <span class="comment">%isValidModel checks the InputHandles defined in XXXMainUI &lt;&lt;%Edit to UI</span>
            <span class="keyword">if</span> ~isValidModel(mobj, metaclass(obj).Name)  
                warndlg(<span class="string">'Use Setup to define model input parameters'</span>);
                <span class="keyword">return</span>;
            <span class="keyword">end</span>
            muicat = mobj.Cases;
            <span class="comment">%assign the run parameters to the model instance</span>
            <span class="comment">%may need to be after input data selection to capture caserecs</span>
            <span class="comment">%of any existing Case datasets used as inputs to the model. The</span>
            <span class="comment">%classes loaded are defined in the main model UI class:</span>
            <span class="comment">%obj.ModelInputs.&lt;model classname&gt; = {'Param_class1',Param_class2',etc}</span>
            <span class="comment">%if fully defined RunParam property should contain all the</span>
            <span class="comment">%input parameters and dataset links needed to run the model.</span>
            setRunParam(obj,mobj); 
            
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Model code  &lt;&lt;INSERT MODEL CODE or CALL MODEL&gt;&gt;</span>
<span class="comment">%--------------------------------------------------------------------------</span>
            inp = mobj.Inputs.PropsInput_template_1;         <span class="comment">% &lt;&lt;Edit to suit model</span>
            run = mobj.Inputs.PropsInput_template_2;
            [results,xy,modeltime] = your_model(inp,run);
            <span class="comment">%now assign results to object properties  </span>
            modeltime = seconds(modeltime);  <span class="comment">%durataion data for rows </span>
            <span class="comment">%code for datetime format</span>
            <span class="comment">% modeldate = datetime(rnpobj.StartYear,1,1,0,0,0);</span>
            <span class="comment">% modeltime = modeldate + seconds(modeltime);</span>
            <span class="comment">% modeltime.Format = dsp.Row.Format;</span>
            <span class="comment">%code for duration format</span>
            <span class="comment">% modeltime = years(StartYear)+seconds(modeltime);</span>
            <span class="comment">% modeltime.Format = dsp.Row.Format;</span>
            <span class="comment">%code for calendatDuration format </span>
            <span class="comment">% modeldate = datetime(StartYear,1,1,0,0,0);</span>
            <span class="comment">% modeltime = modeldate + seconds(modeltime);</span>
            <span class="comment">% modeltime.Format = dsp.Row.Format;</span>
            <span class="comment">% modeltime = calendarDuration(datevec(modeltime));</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Assign model output to a dstable using the defined dsproperties meta-data</span>
<span class="comment">%--------------------------------------------------------------------------                   </span>
            <span class="comment">%each variable should be an array in the 'results' cell array</span>
            <span class="comment">%if model returns single variable as array of doubles, use {results}</span>
            dst = dstable(results,<span class="string">'RowNames'</span>,modeltime,<span class="string">'DSproperties'</span>,dsp);
            dst.Dimensions.X = xy{:,1};     <span class="comment">%grid x-coordinate</span>
            dst.Dimensions.Y = xy{:,2};     <span class="comment">%grid y-coordinate</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Save results</span>
<span class="comment">%--------------------------------------------------------------------------                        </span>
            <span class="comment">%assign metadata about model</span>
            dst.Source = metaclass(obj).Name;
            dst.MetaData = <span class="string">'Any additional information to be saved'</span>;
            <span class="comment">%save results</span>
            setDataSetRecord(obj,muicat,dst,<span class="string">'model'</span>);
            getdialog(<span class="string">'Run complete'</span>);
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%%</span>
    <span class="keyword">methods</span>
        <span class="keyword">function</span> tabPlot(obj,src) <span class="comment">%abstract class for muiDataSet</span>
            <span class="comment">%generate plot for display on Q-Plot tab</span>
            
            <span class="comment">%add code to define plot format or call default tabplot using:</span>
            tabDefaultPlot(obj,src);
        <span class="keyword">end</span>
    <span class="keyword">end</span> 
<span class="comment">%%    </span>
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> dsp = modelDSproperties(~) 
            <span class="comment">%define a dsproperties struct and add the model metadata</span>
            dsp = struct(<span class="string">'Variables'</span>,[],<span class="string">'Row'</span>,[],<span class="string">'Dimensions'</span>,[]); 
            <span class="comment">%define each variable to be included in the data table and any</span>
            <span class="comment">%information about the dimensions. dstable Row and Dimensions can</span>
            <span class="comment">%accept most data types but the values in each vector must be unique</span>
            
            <span class="comment">%struct entries are cell arrays and can be column or row vectors</span>
            dsp.Variables = struct(<span class="keyword">...</span><span class="comment">                       % &lt;&lt;Edit metadata to suit model</span>
                <span class="string">'Name'</span>,{<span class="string">'Var1'</span>,<span class="string">'Var2'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Variable 1'</span>,<span class="string">'Variable 2'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m/s'</span>,<span class="string">'m/s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Plot label 1'</span>,<span class="string">'Plot label 2'</span>},<span class="keyword">...</span>
                <span class="string">'QCflag'</span>,{<span class="string">'model'</span>,<span class="string">'model'</span>}); 
            dsp.Row = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Time (s)'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'s'</span>});        
            dsp.Dimensions = struct(<span class="keyword">...</span><span class="comment">    </span>
                <span class="string">'Name'</span>,{<span class="string">'X'</span>,<span class="string">'Y'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'X co-ordinate'</span>,<span class="string">'Y co-ordinate'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m'</span>,<span class="string">'m'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'X co-ordinate (m)'</span>,<span class="string">'Y co-ordinate (m)'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'-'</span>,<span class="string">'-'</span>});  
        <span class="keyword">end</span>
    <span class="keyword">end</span>    
<span class="keyword">end</span>

</pre><p>At the bottom of the template is the dataDSproperties function. This must be edited to match the data being loaded. Working out the details of the format of the data being loaded helps to ensure that the data is being formatted correctly and defining the metadata defined by the dsproperties stuct ensures that the meta-data is avaialable for subsequent use of the data in plotting, statical analysis, etc.</p><h2 id="11">Data access UIs</h2><p>Default interfaces for editing, plotting, statistical analysis and data mainpulation are provided as part of the <a href="matlab:doc('muitoolbox')">muitoolbox</a>. Alternative or addional UIs can be added using the <a href="matlab:doc('muidataui')">muiDataUI</a> abstract class. This allows a number of tabs to be defined, each with its own set of controls to define the selection needed for a specific application. See <a href="matlab:doc('muieditui')">muiEditUI</a>, <a href="matlab:doc('muiplotsui')">muiPlotsUI</a>, <a href="matlab:doc('muistatsui')">muiStatsUI</a> and <a href="matlab:doc('muimanipui')">muiManipUI</a> for examples of different configurations. The setXXXXtab methods at the end of the template and example classes, are used to define the content of each tab. The methods that <a href="matlab:doc('muidataui')">muiDataUI</a> requires in a subclass include:</p><div><ul><li><b>setTabContent</b> - define the layout options for individual tabs by calling the setXXXXtab methods for each tab.</li><li><b>setVariableLists</b> - initialise selection lists defined for each tab</li><li><b>useSelection</b> - implement the actions to be taken in response to the action buttons. The Clear and Close options are handled within muiDataUI.</li></ul></div><pre class="language-matlab">
<span class="keyword">classdef</span> DataUI_template &lt; muiDataUI                          <span class="comment">% &lt;&lt; Edit to classname</span>
 <span class="comment">%</span>
<span class="comment">%-------class help---------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   DataUI_template.m                                         % &lt;&lt; Edit to file name</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Template for Class that implements the muiDataUI class </span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   muiDataUI.m and interfaces for editing, plotting etc</span>
<span class="comment">%   eg muiPLotsUI, muiPlots.m, muiStatsUI, muiStats</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% </span>
    <span class="keyword">properties</span> (Transient)
        <span class="comment">%Abstract variables for muiDataUI----------------------------------        </span>
        <span class="comment">% names of tabs providing different data accces options</span>
        TabOptions = {<span class="string">'Calc'</span>}; 
        <span class="comment">% selections that force a call to setVariableLists</span>
        updateSelections = {<span class="string">'Case'</span>,<span class="string">'Dataset'</span>};
        <span class="comment">%Additional variables for application------------------------------</span>
        Tabs2Use         <span class="comment">%number of tabs to include  (set in getPlotGui)     </span>
    <span class="keyword">end</span>  
<span class="comment">%%  </span>
    <span class="keyword">methods</span> (Access=protected)
        <span class="keyword">function</span> obj = DataUI_template(mobj)                 <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%initialise standard figure and menus</span>
            guititle = <span class="string">'Template title'</span>;                     <span class="comment">% &lt;&lt; Edit to suit application</span>
            setDataUIfigure(obj,mobj,guititle);  <span class="comment">%initialise figure     </span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>   
<span class="comment">%%    </span>
    <span class="keyword">methods</span> (Static)
        <span class="keyword">function</span> obj = getTemplateUI(mobj)                   <span class="comment">% &lt;&lt; Edit to suit application</span>
            <span class="comment">%this is the function call to initialise the UI and assigning</span>
            <span class="comment">%to a handle of the main model UI (mobj.mUI.****) </span>
            <span class="comment">%options for selection on each tab are defined in setTabContent</span>
            <span class="keyword">if</span> isempty(mobj.Cases.Catalogue.CaseID)
                warndlg(<span class="string">'No data available to XXXXXXX?'</span>);    <span class="comment">% &lt;&lt; Edit to suit application</span>
                obj = [];
                <span class="keyword">return</span>;
            <span class="keyword">elseif</span> isa(mobj.mUI.DataUI_template,<span class="string">'DataUI_template'</span>) <span class="comment">% &lt;&lt; Edit to suit application</span>
                obj = mobj.mUI.DataUI_template;
                <span class="keyword">if</span> isempty(obj.dataUI.Figure)
                    obj = obj.setDataUIfigure(mobj); <span class="comment">%initialise figure </span>
                    setDataUItabs(obj,mobj); <span class="comment">%add tabs </span>
                <span class="keyword">else</span>
                    getdialog(<span class="string">'Derive Output UI is open'</span>);
                <span class="keyword">end</span>
            <span class="keyword">else</span>
                obj = DataUI_template(mobj);                 <span class="comment">% &lt;&lt; Edit to classname</span>
                obj.Tabs2Use = {<span class="string">'TabName'</span>};                  <span class="comment">% &lt;&lt; Edit to suit application</span>
                setDataUItabs(obj,mobj); <span class="comment">%add tabs           % &lt;&lt; see muiPlotsUI for example of multiple tabs        </span>
            <span class="keyword">end</span>                
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%%</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Abstract methods required by muiDataUI to define tab content</span>
<span class="comment">%--------------------------------------------------------------------------</span>
    <span class="keyword">methods</span> (Access=protected) 
        <span class="keyword">function</span> setTabContent(obj,src)
            <span class="comment">%setup default layout options for individual tabs</span>
            <span class="comment">%Abstract function required by muiDataUI</span>
            itab = find(strcmp(obj.Tabs2Use,src.Tag));
            obj.TabContent(itab) = muiDataUI.defaultTabContent;
            
            <span class="comment">%customise the layout of each tab. Overload the default</span>
            <span class="comment">%template with a function for the tab specific definition</span>
            setTabNameTab(obj,src)                           <span class="comment">% &lt;&lt; Edit to suit application   </span>
                                                             <span class="comment">% &lt;&lt; use switch if multiple tabs</span>
        <span class="keyword">end</span>                
<span class="comment">%%</span>
        <span class="keyword">function</span> setVariableLists(obj,src,mobj,caserec)
            <span class="comment">%initialise the variable lists or values</span>
            <span class="comment">%Abstract function required by muiDataUI</span>
            <span class="comment">%called during initialisation by muiDataUI.setDataUItabs and </span>
            <span class="comment">%whenever muiDataUI.updateCaseList is called</span>
            <span class="comment">%The property updateSelection is used to force a call for</span>
            <span class="comment">%dependent variable lists (eg when Variables change if a</span>
            <span class="comment">%different Casce or Dataset is selected)</span>
            itab = strcmp(obj.Tabs2Use,src.Tag);
            S = obj.TabContent(itab);
            sel_uic = S.Selections;
            cobj = getCase(mobj.Cases,caserec);
            <span class="keyword">for</span> i=1:length(sel_uic)                
                <span class="keyword">switch</span> sel_uic{i}.Tag
                    <span class="keyword">case</span> <span class="string">'Case'</span>
                        muicat = mobj.Cases.Catalogue;
                        sel_uic{i}.String = muicat.CaseDescription;
                        sel_uic{i}.UserData = sel_uic{i}.Value; <span class="comment">%used to track changes</span>
                    <span class="keyword">case</span> <span class="string">'Dataset'</span>
                        sel_uic{i}.String = fieldnames(cobj.Data);
                        sel_uic{i}.Value = 1;
                    <span class="keyword">case</span> <span class="string">'Variable'</span>     
                        ds = fieldnames(cobj.Data);
                        sel_uic{i}.String = cobj.Data.(ds{1}).VariableDescriptions;
                        sel_uic{i}.Value = 1;
                <span class="keyword">end</span>
            <span class="keyword">end</span>        
            obj.TabContent(itab).Selections = sel_uic;
        <span class="keyword">end</span>      
<span class="comment">%%        </span>
        <span class="keyword">function</span> useSelection(obj,src,mobj)  
            <span class="comment">%make use of the selection made to create a plot of selected type</span>
            <span class="comment">%Abstract function required by muiDataUI</span>
            <span class="keyword">switch</span> src.String
                <span class="keyword">case</span> <span class="string">'Calculate'</span>    <span class="comment">%calculate result        % &lt;&lt; Cases must match button names</span>
                    cobj = muiUserModel;                     <span class="comment">% &lt;&lt; defined for tab. Defaults such as</span>
                    createVar(cobj,obj,src,mobj);            <span class="comment">% &lt;&lt; Clear and Close are handled in muiDataUI</span>
                 <span class="keyword">case</span> <span class="string">'Function'</span>
                    selectFunction(obj,mobj);    
            <span class="keyword">end</span> 
        <span class="keyword">end</span>           
    <span class="keyword">end</span>
<span class="comment">%%</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Additional methods used to control selection and functionality of UI</span>
<span class="comment">%--------------------------------------------------------------------------            </span>
    <span class="keyword">methods</span> (Access=private)     
<span class="comment">%</span>
<span class="comment">%%</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Additional methods used to define tab content</span>
<span class="comment">%--------------------------------------------------------------------------</span>
        <span class="keyword">function</span> setTemplateTab(obj,src)                     <span class="comment">% &lt;&lt; Edit to suit application   </span>
            <span class="comment">%customise the layout of the Template tab</span>
            <span class="comment">%overload defaults defined in muiDataUI.defaultTabContent</span>
            itab = strcmp(obj.Tabs2Use,src.Tag);
            S = obj.TabContent(itab);
            
            <span class="comment">% overload default definition as required</span>
            <span class="comment">% see muiEditUI, muiManipUI, muiPlotsUI and muiStatsUI for</span>
            <span class="comment">% examples</span>
            
            obj.TabContent(itab) = S;             <span class="comment">%update object</span>
        <span class="keyword">end</span>        
    <span class="keyword">end</span>   
<span class="keyword">end</span>

</pre><p>Classes derived from muiDataUI are intended to enable easy access to multi-dimensional data stored in <a href="matlab:doc('dstable')">dstables</a>, allowing the user to select individual Cases and Datasets before selecting specific variables and data ranges of both the variable and any associated dimension data.</p><h2 id="15">See Also</h2><p>A full list of the <a href="matlab:doc('muitemplates')">Templates</a> which can be found in the templates folder <a href="matlab:mui_template_folder">here</a>.  <br> <a href="matlab:doc('muitbx_example')">Examples</a> of using the interface for different applications. The files for these examples can be found in the example folder <a href="matlab:mui_example_folder">here</a>.  <br> <a href="matlab:doc('muitoolbox')">muitoolbox</a> documentation for details of the <i>muiModelUI</i> abstract interface class and the other UIs used in <i>ModelUI</i>. <br> <a href="matlab:doc('dstoolbox')">dstoolbox</a> documentation for details of <i>dstable</i> and <i>dsproperties</i>. <br> The demonstration UI provided in the <a href="matlab:doc('modelui')">ModelUI</a> App.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% ModelUI - Getting Started
% The steps below outline how to setup a bespoke application of ModelUI
% by modifying the default UI. These steps are also set out
% in the <matlab:mui_open_manual Introduction to muitoolbox slide pack>.
%%
% # Decide on what components are needed. These might include: <br>
%   o UI - the main interface for the application  <br>
%   o Data import - load different types of data <br>
%   o Input parameters - define any parameters needed for the application <br>
%   o Model(s) - initialise and call any models to be run by the application.  <br>
% # Give names to each component, e.g.: <br>
%   ModelUI, demoData, demoProps, demoModel
% # Copy the class templates for the components from here to your working folder
% # Create classes for each component by editing the templates as illustrated
%   for each template below.

%%
% Templates for the main components are provided in the muitemplates 
% folder, which can be found <matlab:mui_template_folder here>. The templates 
% provide the code for each component and the comments highlight where the 
% files need to be edited to adapt the templates to a different application. 

%% Main UI
% To adapt the demonstration <matlab:doc('modelui') ModelUI> App for a new
% application, the class inherits the ModelUI class.
%%
% Define a classname that reflects the intended application. In the setMUI
% method define the components of the application, such as the model and input
% parameter classes used that define the ModelInputs property and the
% plottig and statistics options to include in the respective UIs. The
% setTabProperties method has to be edited to match the class names for the
% parameter inputs and the position for each parameter set on the tab. Finally, 
% the calls to input classes and to run the model need to be edited to the 
% class and method names to be used.
%
% <include>../muitemplates/UseModelUI_template.m</include>
%
%%
% For bespoke implementations the new class should inherit the 
% <matlab:doc('muimodelui') muiModelUI> interface. There are important 
% differences in the class constructor method and these are highlighted in
% the UseUI_template.m template file.

%% Data import
% For each type of _data_ to be imported, define a classname and edit the
% template where indicated using the classname. The classname can be
% generic (e.g. Waves) and the meta-data can be modified to reflect
% variation in data from different sources (number of variables, file
% format, etc). This is used extensively in the ModelUI CoastalTools App.
% In the template provided, edit the call to dstable (line 46) and the file format defined in
% readInputData (line 67) to match the data being loaded. The Q-Plot tab
% displays a fixed format plot of the data. This can use the default format
% or be customised in the tabPlot function.
%%
% At the bottom of the template is the dataDSproperties function. This must
% be edited to match the data being loaded. Working out the details of the
% fomrat of the data being loaded helps to ensure that the data is being
% formatted correctly and defining the metadata defined by the dsproperties
% stuct ensures that the meta-data is avaialble for subsequent use of the
% data in plotting, statical analysis, etc.
%
% <include>../muitemplates/DataImport_template.m</include>
%
%% Input parameters
% For each set of _input parameters_, define a classname and edit the
% template where indicated using the classname. Define the _input
% parameters_ required in the properties block and provide a description 
% (used in the input UI) for each parameter as a cell array of strings in 
% the PropertyLabels property.
%
% <include>../muitemplates/ParamInput_template.m</include>GDinterface
%
%% Models
% For each _model_ to be included, define a classname and edit the
% template where indicated using the classname. In the sections of the
% template indicated as Model code and Assing model output, edit to suit
% the needs of the application. The Q-Plot tab display a fixed format plot
% of the model output. This can use the default format or be customised in 
% the tabPlot function.
%
% <include>../muitemplates/Model_template</include>
%
%%
% At the bottom of the template is the dataDSproperties function. This must
% be edited to match the data being loaded. Working out the details of the
% format of the data being loaded helps to ensure that the data is being
% formatted correctly and defining the metadata defined by the dsproperties
% stuct ensures that the meta-data is avaialable for subsequent use of the
% data in plotting, statical analysis, etc.	

%% Data access UIs
% Default interfaces for editing, plotting, statistical analysis and data
% mainpulation are provided as part of the <matlab:doc('muitoolbox') muitoolbox>.
% Alternative or addional UIs can be added using the <matlab:doc('muidataui') muiDataUI> 
% abstract class. This allows a number of tabs to be defined, each with its
% own set of controls to define the selection needed for a specific
% application. See <matlab:doc('muieditui') muiEditUI>,
% <matlab:doc('muiplotsui') muiPlotsUI>, <matlab:doc('muistatsui') muiStatsUI>
% and <matlab:doc('muimanipui') muiManipUI> for examples of different
% configurations. The setXXXXtab methods at the end of the template and
% example classes, are used to define the content of each tab. The methods
% that <matlab:doc('muidataui') muiDataUI> requires in a subclass include:
%%
% * *setTabContent* - define the layout options for individual tabs by
% calling the setXXXXtab methods for each tab.
% * *setVariableLists* - initialise selection lists defined for each tab
% * *useSelection* - implement the actions to be taken in response to the
% action buttons. The Clear and Close options are handled within muiDataUI.
%%
% 
% <include>../muitemplates/DataUI_template</include>
%
%%
% Classes derived from muiDataUI are intended to enable easy access to 
% multi-dimensional data stored in <matlab:doc('dstable') dstables>,
% allowing the user to select individual Cases and Datasets before selecting
% specific variables and data ranges of both the variable and any associated
% dimension data.

%% See Also
% A full list of the <matlab:doc('muitemplates') Templates> which can be found in
% the templates folder <matlab:mui_template_folder here>.  <br>
% <matlab:doc('muitbx_example') Examples> of using the interface for
% different applications. The files for these examples can be found in
% the example folder <matlab:mui_example_folder here>.  <br>
% <matlab:doc('muitoolbox') muitoolbox> documentation for details of the
% _muiModelUI_ abstract interface class and the other UIs used in _ModelUI_. <br>
% <matlab:doc('dstoolbox') dstoolbox> documentation for details of 
% _dstable_ and _dsproperties_. <br>
% The demonstration UI provided in the <matlab:doc('modelui') ModelUI> App. 







##### SOURCE END #####
--></body></html>